{"version":3,"sources":["webpack:///./src/components/cms/content-types/RichText/RichText.tsx","webpack:///./src/components/cms/pages/SplashPage/SplashMagic.tsx","webpack:///./src/components/cms/SplashSection/SplashSection.tsx","webpack:///./src/components/cms/pages/SplashPage/scrollHook.ts","webpack:///./src/components/cms/pages/SplashPage/SplashPage.tsx"],"names":["_react","_interopRequireDefault","__webpack_require__","_RichTextModule","_classnames","_richTextTypes","_richTextReactRenderer","_AppLink","Text","children","default","createElement","className","Paragraph","node","data","ClassNames","RichText","doc","options","renderNode","[object Object]","BLOCKS","EMBEDDED_ENTRY","JSON","stringify","PARAGRAPH","INLINES","HYPERLINK","to","uri","content","value","ENTRY_HYPERLINK","toId","target","sys","id","documentToReactComponents","constructRichText","_SplashMagicModule","_SplashSection","_interopRequireWildcard","_scrollHook","sections","activeIndex","previousIndex","length","components","map","item","idx","appearType","undefined","AppearType","ACTIVE","ACTIVE_NEXT","ACTIVE_PREV","WAS_ACTIVE","NONE","Object","assign","key","_SplashSectionModule","_RichText","props","fields","SplashSection","area1","style","background","background1","color","textColor1","img","src","image","file","url","area2","background2","textColor2","text","TIME_TO_WAIT_FOR_NEW_SCROLL_EVENT_IN_MILLIS","WHEEL_EVENT","TOUCH_START_EVENT","TOUCH_END_EVENT","wheeling","totalItemsToScrollThrough","initialItemIndex","setActiveIndex","useState","setPreviousIndex","next","prev","touchStartEvent","e","preventDefault","yStart","changedTouches","pageY","window","addEventListener","touchEndEvent","removeEventListener","treshold","Math","abs","wheelEvent","deltaY","clearTimeout","setTimeout","useEffect","_SplashPageModule","_SplashMagic","pageContext","SplashPage"],"mappings":"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","file":"component---src-components-cms-pages-splash-page-splash-page-tsx-e56e405b0436b61f257b.js","sourcesContent":["/*\n * https://www.contentful.com/developers/docs/javascript/tutorials/rendering-contentful-rich-text-with-javascript/\n * https://github.com/contentful/rich-text/tree/master/packages/rich-text-react-renderer\n * */\nimport React, { FunctionComponent } from 'react';\nimport ClassNames from './RichText.module.scss';\nimport classNames from 'classnames';\nimport { BLOCKS, INLINES } from '@contentful/rich-text-types';\nimport { documentToReactComponents, Options } from '@contentful/rich-text-react-renderer';\nimport AppLink from '../../../../util-components/AppLink/AppLink';\n\ninterface Props {\n    className?: string;\n    data: any;\n}\n\nconst Text: FunctionComponent = ({ children }) => <p className=\"align-center\">{children}</p>;\n\nconst Paragraph = (node, children) => {\n    return <Text>{children}</Text>;\n};\n\nfunction constructRichText(doc) {\n    const options: Options = {\n        renderNode: {\n            [BLOCKS.EMBEDDED_ENTRY]: function EmbeddedEntry(node) {\n                return <div>{JSON.stringify(node)}</div>;\n            },\n            [BLOCKS.PARAGRAPH]: Paragraph,\n            [INLINES.HYPERLINK]: function HyperLink(node) {\n                return <AppLink to={node.data.uri}>{(node.content[0] as any).value}</AppLink>;\n            },\n            [INLINES.ENTRY_HYPERLINK]: function EntryHyperLink(node) {\n                return <AppLink toId={node.data.target.sys.id}>{(node.content[0] as any).value}</AppLink>;\n            },\n        },\n    };\n\n    return documentToReactComponents(doc, options);\n}\nconst RichText: FunctionComponent<Props> = ({ className, data }) => {\n    return <div className={classNames(ClassNames.RichText, className)}>{constructRichText(data)}</div>;\n};\n\nexport default RichText;\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport ClassNames from './SplashMagic.module.scss';\nimport SplashSection, { AppearType, CmsProps as SplashSectionCmsProps } from '../../SplashSection/SplashSection';\nimport usePageItemsScroll from './scrollHook';\n\ninterface Props {\n    sections: SplashSectionCmsProps[];\n}\n\nconst SplashMagic: FunctionComponent<Props> = ({ sections }) => {\n    const { activeIndex, previousIndex } = usePageItemsScroll(sections.length);\n\n    function renderComponents(): ReactNode {\n        return sections.map((item, idx) => {\n            const appearType =\n                idx === activeIndex\n                    ? previousIndex === undefined\n                        ? AppearType.ACTIVE\n                        : activeIndex > previousIndex\n                        ? AppearType.ACTIVE_NEXT\n                        : AppearType.ACTIVE_PREV\n                    : idx === previousIndex\n                    ? AppearType.WAS_ACTIVE\n                    : AppearType.NONE;\n\n            return <SplashSection key={item.sys.id} appearType={appearType} {...item} />;\n        });\n    }\n\n    return <div className={ClassNames.components}>{renderComponents()}</div>;\n};\n\nexport default SplashMagic;\n","import React, { FunctionComponent } from 'react';\nimport classNames from 'classnames';\nimport ClassNames from './SplashSection.module.scss';\nimport RichText from '../content-types/RichText/RichText';\n\nexport interface CmsProps {\n    sys: {\n        id: string;\n    };\n    fields: {\n        image: any;\n        text: any;\n        background1: string;\n        background2: string;\n        textColor1?: string;\n        textColor2?: string;\n    };\n}\n\nexport enum AppearType {\n    ACTIVE = 1,\n    ACTIVE_NEXT,\n    ACTIVE_PREV,\n    WAS_ACTIVE,\n    NONE,\n}\n\ninterface Props {\n    appearType: AppearType;\n}\n\nconst SplashSection: FunctionComponent<Props & CmsProps> = props => {\n    const fields = props.fields;\n    return (\n        <div className={classNames(ClassNames.SplashSection, ClassNames[AppearType[props.appearType]])}>\n            <div className={ClassNames.area1} style={{ background: fields.background1, color: fields.textColor1 }}>\n                <img className={ClassNames.img} src={fields.image.fields.file.url} />\n            </div>\n            <div className={ClassNames.area2} style={{ background: fields.background2, color: fields.textColor2 }}>\n                <RichText data={fields.text} />\n            </div>\n        </div>\n    );\n};\n\nexport default SplashSection;\n","/* THIS HOOK SHOULD BE USED ONLY ONCE ON A PAGE. WHEELING PROPERTY CANNOT BE IN STATE, BECAUSE THAT IS DELAYED IN REACT,\n *  HENCE MOUSE WILL TRIGGER A LOT MORE EVENTS. BUT BECAUSE WHEELING IS NOW A MODULE PROP, MULTIPLE useScroll WILL\n *  INFLUENCE THIS SAME PROPERTY. NO GO. RESOLVE & LEAVE IT, YOU DON'T WANT 2 SCROLLS IN 1 PAGE ANYWAY */\nimport { useEffect, useState } from 'react';\n\nconst TIME_TO_WAIT_FOR_NEW_SCROLL_EVENT_IN_MILLIS = 50;\n\nconst WHEEL_EVENT = 'wheel';\nconst TOUCH_START_EVENT = 'touchstart';\nconst TOUCH_END_EVENT = 'touchend';\nlet wheeling: number | undefined = undefined;\n\nfunction usePageItemsScroll(\n    totalItemsToScrollThrough: number,\n    initialItemIndex: number = 0\n): { activeIndex: number; previousIndex: number | undefined } {\n    const [activeIndex, setActiveIndex] = useState(initialItemIndex);\n    const [previousIndex, setPreviousIndex] = useState<number | undefined>(undefined);\n\n    function next(): void {\n        setPreviousIndex(activeIndex);\n        setActiveIndex(activeIndex + 1);\n    }\n    function prev(): void {\n        setPreviousIndex(activeIndex);\n        setActiveIndex(activeIndex - 1);\n    }\n\n    function touchStartEvent(e: TouchEvent): void {\n        e.preventDefault();\n        const yStart = e.changedTouches[0].pageY;\n\n        function touchEndEvent(e): void {\n            e.preventDefault();\n            window.removeEventListener(TOUCH_END_EVENT, touchEndEvent);\n            const treshold = e.changedTouches[0].pageY - yStart;\n            if (Math.abs(treshold) < 15) {\n                return;\n            }\n            if (treshold < 0) {\n                next();\n            } else {\n                prev();\n            }\n        }\n        window.addEventListener(TOUCH_END_EVENT, touchEndEvent);\n    }\n\n    function wheelEvent(e): void {\n        if (wheeling === undefined) {\n            if (e.deltaY > 0 && activeIndex < totalItemsToScrollThrough - 1) {\n                next();\n            } else if (e.deltaY < 0 && 0 < activeIndex) {\n                prev();\n            }\n        }\n        clearTimeout(wheeling);\n        wheeling = window.setTimeout(() => {\n            wheeling = undefined;\n        }, TIME_TO_WAIT_FOR_NEW_SCROLL_EVENT_IN_MILLIS);\n    }\n\n    // inefficient, needs a single time (so deps [], but had issue and code will not stay probably :) )\n    useEffect(() => {\n        if (totalItemsToScrollThrough <= 1) {\n            return;\n        }\n        window.addEventListener(WHEEL_EVENT, wheelEvent);\n        window.addEventListener(TOUCH_START_EVENT, touchStartEvent);\n        return () => {\n            window.removeEventListener(WHEEL_EVENT, wheelEvent);\n            window.removeEventListener(TOUCH_START_EVENT, touchStartEvent);\n        };\n    }, [activeIndex, totalItemsToScrollThrough]);\n\n    return {\n        activeIndex,\n        previousIndex,\n    };\n}\n\nexport default usePageItemsScroll;\n","import React, { FunctionComponent } from 'react';\nimport ClassNames from './SplashPage.module.scss';\nimport { CmsProps as SplashSectionCmsProps } from '../../SplashSection/SplashSection';\nimport SplashMagic from './SplashMagic';\n\ninterface Props {\n    pageContext: {\n        fields: {\n            sections: SplashSectionCmsProps[];\n        };\n    };\n}\n\nconst SplashPage: FunctionComponent<Props> = props => {\n    const sections = props.pageContext.fields.sections;\n    return (\n        <div className={ClassNames.SplashPage}>\n            <SplashMagic sections={sections} />\n        </div>\n    );\n};\n\nexport default SplashPage;\n"],"sourceRoot":""}