{"version":3,"sources":["webpack:///./src/components/cms/content-types/RichText/RichText.tsx","webpack:///./src/components/cms/pages/SplashPage/SplashMagic.tsx","webpack:///./src/components/cms/SplashSection/SplashSection.tsx","webpack:///./src/components/cms/pages/SplashPage/scrollHook.ts","webpack:///./src/components/cms/pages/SplashPage/SplashPage.tsx"],"names":["_react","_interopRequireDefault","__webpack_require__","_RichTextModule","_richTextTypes","_richTextReactRenderer","_AppLink","_link","_PageConfig","Text","children","default","createElement","className","Paragraph","node","data","ClassNames","RichText","doc","options","renderNode","[object Object]","BLOCKS","EMBEDDED_ENTRY","JSON","stringify","PARAGRAPH","INLINES","HYPERLINK","to","uri","content","value","ENTRY_HYPERLINK","pageLinkMap","locales","currentLocaleCode","usePageConfig","slug","target","sys","id","locale","find","code","link","getLinkPath","documentToReactComponents","constructRichText","_SplashMagicModule","_SplashSection","_interopRequireWildcard","_scrollHook","sections","activeIndex","previousIndex","length","components","map","item","idx","appearType","undefined","AppearType","ACTIVE","ACTIVE_NEXT","ACTIVE_PREV","WAS_ACTIVE","NONE","Object","assign","key","_classnames","_SplashSectionModule","_RichText","props","fields","SplashSection","area1","style","background","background1","color","textColor1","img","src","image","file","url","area2","background2","textColor2","text","TIME_TO_WAIT_FOR_NEW_SCROLL_EVENT_IN_MILLIS","WHEEL_EVENT","TOUCH_START_EVENT","TOUCH_END_EVENT","wheeling","totalItemsToScrollThrough","initialItemIndex","setActiveIndex","useState","setPreviousIndex","next","prev","touchStartEvent","e","preventDefault","yStart","changedTouches","pageY","window","addEventListener","touchEndEvent","removeEventListener","treshold","Math","abs","wheelEvent","deltaY","clearTimeout","setTimeout","useEffect","_SplashPageModule","_SplashMagic","pageContext","SplashPage"],"mappings":"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","file":"component---src-components-cms-pages-splash-page-splash-page-tsx-803e87ca416f6533977f.js","sourcesContent":["/*\n * https://www.contentful.com/developers/docs/javascript/tutorials/rendering-contentful-rich-text-with-javascript/\n * https://github.com/contentful/rich-text/tree/master/packages/rich-text-react-renderer\n * */\nimport React, { FunctionComponent } from 'react';\nimport ClassNames from './RichText.module.scss';\nimport { BLOCKS, INLINES } from '@contentful/rich-text-types';\nimport { documentToReactComponents, Options } from '@contentful/rich-text-react-renderer';\nimport AppLink from '../../../../util-components/AppLink/AppLink';\nimport { getLinkPath } from '../../../../utils/link/link';\nimport { Locale } from 'Types/Locale';\nimport { usePageConfig } from '../../../../contexts/PageConfig/PageConfig';\n\ninterface Props {\n    className?: string;\n    data: any;\n}\n\nconst Text: FunctionComponent = ({ children }) => <p className=\"align-center\">{children}</p>;\n\nconst Paragraph = (node, children) => {\n    return <Text>{children}</Text>;\n};\n\nfunction constructRichText(doc) {\n    const options: Options = {\n        renderNode: {\n            [BLOCKS.EMBEDDED_ENTRY]: function EmbeddedEntry(node) {\n                return <div>{JSON.stringify(node)}</div>;\n            },\n            [BLOCKS.PARAGRAPH]: Paragraph,\n            [INLINES.HYPERLINK]: function HyperLink(node) {\n                return <AppLink to={node.data.uri}>{(node.content[0] as any).value}</AppLink>;\n            },\n            [INLINES.ENTRY_HYPERLINK]: function EntryHyperLink(node) {\n                const { pageLinkMap, locales, currentLocaleCode } = usePageConfig();\n                const slug = pageLinkMap[node.data.target.sys.id];\n\n                const locale: Locale = locales.find(locale => locale.code === currentLocaleCode)!;\n                const link = getLinkPath(locale, slug);\n\n                return <AppLink to={link}>{(node.content[0] as any).value}</AppLink>;\n            },\n        },\n    };\n\n    return documentToReactComponents(doc, options);\n}\nconst RichText: FunctionComponent<Props> = ({ className, data }) => {\n    return <div className={ClassNames.RichText}>{constructRichText(data)}</div>;\n};\n\nexport default RichText;\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport ClassNames from './SplashMagic.module.scss';\nimport SplashSection, { AppearType, CmsProps as SplashSectionCmsProps } from '../../SplashSection/SplashSection';\nimport usePageItemsScroll from './scrollHook';\n\ninterface Props {\n    sections: SplashSectionCmsProps[];\n}\n\nconst SplashMagic: FunctionComponent<Props> = ({ sections }) => {\n    const { activeIndex, previousIndex } = usePageItemsScroll(sections.length);\n\n    function renderComponents(): ReactNode {\n        return sections.map((item, idx) => {\n            const appearType =\n                idx === activeIndex\n                    ? previousIndex === undefined\n                        ? AppearType.ACTIVE\n                        : activeIndex > previousIndex\n                        ? AppearType.ACTIVE_NEXT\n                        : AppearType.ACTIVE_PREV\n                    : idx === previousIndex\n                    ? AppearType.WAS_ACTIVE\n                    : AppearType.NONE;\n\n            return <SplashSection key={item.sys.id} appearType={appearType} {...item} />;\n        });\n    }\n\n    return <div className={ClassNames.components}>{renderComponents()}</div>;\n};\n\nexport default SplashMagic;\n","import React, { FunctionComponent } from 'react';\nimport classNames from 'classnames';\nimport ClassNames from './SplashSection.module.scss';\nimport RichText from '../content-types/RichText/RichText';\n\nexport interface CmsProps {\n    sys: {\n        id: string;\n    };\n    fields: {\n        image: any;\n        text: any;\n        background1: string;\n        background2: string;\n        textColor1?: string;\n        textColor2?: string;\n    };\n}\n\nexport enum AppearType {\n    ACTIVE = 1,\n    ACTIVE_NEXT,\n    ACTIVE_PREV,\n    WAS_ACTIVE,\n    NONE,\n}\n\ninterface Props {\n    appearType: AppearType;\n}\n\nconst SplashSection: FunctionComponent<Props & CmsProps> = props => {\n    const fields = props.fields;\n    return (\n        <div className={classNames(ClassNames.SplashSection, ClassNames[AppearType[props.appearType]])}>\n            <div className={ClassNames.area1} style={{ background: fields.background1, color: fields.textColor1 }}>\n                <img className={ClassNames.img} src={fields.image.fields.file.url} />\n            </div>\n            <div className={ClassNames.area2} style={{ background: fields.background2, color: fields.textColor2 }}>\n                <RichText className={ClassNames.text} data={fields.text} />\n            </div>\n        </div>\n    );\n};\n\nexport default SplashSection;\n","/* THIS HOOK SHOULD BE USED ONLY ONCE ON A PAGE. WHEELING PROPERTY CANNOT BE IN STATE, BECAUSE THAT IS DELAYED IN REACT,\n *  HENCE MOUSE WILL TRIGGER A LOT MORE EVENTS. BUT BECAUSE WHEELING IS NOW A MODULE PROP, MULTIPLE useScroll WILL\n *  INFLUENCE THIS SAME PROPERTY. NO GO. RESOLVE & LEAVE IT, YOU DON'T WANT 2 SCROLLS IN 1 PAGE ANYWAY */\nimport { useEffect, useState } from 'react';\n\nconst TIME_TO_WAIT_FOR_NEW_SCROLL_EVENT_IN_MILLIS = 50;\n\nconst WHEEL_EVENT = 'wheel';\nconst TOUCH_START_EVENT = 'touchstart';\nconst TOUCH_END_EVENT = 'touchend';\nlet wheeling: number | undefined = undefined;\n\nfunction usePageItemsScroll(\n    totalItemsToScrollThrough: number,\n    initialItemIndex: number = 0\n): { activeIndex: number; previousIndex: number | undefined } {\n    const [activeIndex, setActiveIndex] = useState(initialItemIndex);\n    const [previousIndex, setPreviousIndex] = useState<number | undefined>(undefined);\n\n    function next(): void {\n        setPreviousIndex(activeIndex);\n        setActiveIndex(activeIndex + 1);\n    }\n    function prev(): void {\n        setPreviousIndex(activeIndex);\n        setActiveIndex(activeIndex - 1);\n    }\n\n    function touchStartEvent(e: TouchEvent): void {\n        e.preventDefault();\n        const yStart = e.changedTouches[0].pageY;\n\n        function touchEndEvent(e): void {\n            e.preventDefault();\n            window.removeEventListener(TOUCH_END_EVENT, touchEndEvent);\n            const treshold = e.changedTouches[0].pageY - yStart;\n            if (Math.abs(treshold) < 15) {\n                return;\n            }\n            if (treshold < 0) {\n                next();\n            } else {\n                prev();\n            }\n        }\n        window.addEventListener(TOUCH_END_EVENT, touchEndEvent);\n    }\n\n    function wheelEvent(e): void {\n        if (wheeling === undefined) {\n            if (e.deltaY > 0 && activeIndex < totalItemsToScrollThrough - 1) {\n                next();\n            } else if (e.deltaY < 0 && 0 < activeIndex) {\n                prev();\n            }\n        }\n        clearTimeout(wheeling);\n        wheeling = window.setTimeout(() => {\n            wheeling = undefined;\n        }, TIME_TO_WAIT_FOR_NEW_SCROLL_EVENT_IN_MILLIS);\n    }\n\n    // inefficient, needs a single time (so deps [], but had issue and code will not stay probably :) )\n    useEffect(() => {\n        if (totalItemsToScrollThrough <= 1) {\n            return;\n        }\n        window.addEventListener(WHEEL_EVENT, wheelEvent);\n        window.addEventListener(TOUCH_START_EVENT, touchStartEvent);\n        return () => {\n            window.removeEventListener(WHEEL_EVENT, wheelEvent);\n            window.removeEventListener(TOUCH_START_EVENT, touchStartEvent);\n        };\n    }, [activeIndex, totalItemsToScrollThrough]);\n\n    return {\n        activeIndex,\n        previousIndex,\n    };\n}\n\nexport default usePageItemsScroll;\n","import React, { FunctionComponent } from 'react';\nimport ClassNames from './SplashPage.module.scss';\nimport { CmsProps as SplashSectionCmsProps } from '../../SplashSection/SplashSection';\nimport SplashMagic from './SplashMagic';\n\ninterface Props {\n    pageContext: {\n        fields: {\n            sections: SplashSectionCmsProps[];\n        };\n    };\n}\n\nconst SplashPage: FunctionComponent<Props> = props => {\n    const sections = props.pageContext.fields.sections;\n    return (\n        <div className={ClassNames.SplashPage}>\n            <SplashMagic sections={sections} />\n        </div>\n    );\n};\n\nexport default SplashPage;\n"],"sourceRoot":""}